name: Claude Test Final

on:
  issue_comment:
    types: [created]
  issues:
    types: [opened, labeled]

permissions:
  issues: write

jobs:
  claude-respond:
    runs-on: ubuntu-latest
    if: |
      (github.event_name == 'issue_comment' && contains(github.event.comment.body, '@claude')) ||
      (github.event_name == 'issues' && contains(github.event.issue.labels.*.name, 'claude'))
    
    steps:
    - name: Comment on Issue
      uses: actions/github-script@v7
      with:
        script: |
          const issueNumber = context.issue.number;
          const eventName = context.eventName;
          
          let message = '';
          
          if (eventName === 'issues') {
            message = `ğŸ¤– **Claude æ•´åˆæ¸¬è©¦æˆåŠŸï¼**
            
å·²åµæ¸¬åˆ° \`claude\` æ¨™ç±¤ã€‚GitHub Actions æ­£å¸¸é‹ä½œã€‚

**å»ºè­°çš„ä¸‹ä¸€æ­¥ï¼š**
1. é–‹å•Ÿ [Claude.ai](https://claude.ai)  
2. è²¼ä¸Šæ­¤ issue çš„å…§å®¹
3. è«‹ Claude å”åŠ©å¯¦ä½œåŠŸèƒ½

---
*æ­¤è¨Šæ¯ç”± GitHub Actions è‡ªå‹•ç”¢ç”Ÿ*`;
          } else if (eventName === 'issue_comment') {
            message = `ğŸ¤– **å·²æ”¶åˆ° @claude æåŠï¼**
            
GitHub Actions æ•´åˆé‹ä½œæ­£å¸¸ã€‚è«‹åœ¨ Claude.ai ä¸­ç¹¼çºŒå°è©±ã€‚`;
          }
          
          await github.rest.issues.createComment({
            issue_number: issueNumber,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: message
          });